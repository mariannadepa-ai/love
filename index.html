<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Walentynka üíò</title>

  <style>
    :root { --bg1:#ffdde1; --bg2:#ee9ca7; }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at 20% 20%, #fff 0 20%, transparent 21%),
                  radial-gradient(circle at 80% 30%, #fff 0 14%, transparent 15%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* ====== NOWE: EKRAN WERYFIKACJI ====== */
    .hidden{ display:none; }

    .gate{
      width:min(720px, 94vw);
      background: rgba(255,255,255,.78);
      border:1px solid rgba(255,255,255,.55);
      border-radius:24px;
      padding:22px 18px;
      box-shadow: 0 18px 60px rgba(0,0,0,.18);
      text-align:center;
      backdrop-filter: blur(10px);
      position:relative;
    }
    .gate h1{margin:0 0 8px; font-size:clamp(24px, 4.5vw, 34px);}
    .gate p{margin:10px 0; font-size:clamp(15px, 2.6vw, 17px); line-height:1.5;}

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin:14px 0 10px;
    }
    .tile{
      position:relative;
      border-radius:16px;
      overflow:hidden;
      cursor:pointer;
      border:2px solid transparent;
      background:#fff;
      aspect-ratio: 1 / 1;
      box-shadow: 0 10px 24px rgba(0,0,0,.12);
      user-select:none;
    }
    .tile img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      user-select:none;
      pointer-events:none;
    }
    .tile.selected{
      border-color:#ff3b6b;
    }
    .tile.selected::after{
      content:"‚úì";
      position:absolute;
      right:10px; top:8px;
      width:28px; height:28px;
      display:grid; place-items:center;
      border-radius:999px;
      background:#ff3b6b;
      color:#fff;
      font-weight:800;
      box-shadow: 0 8px 18px rgba(0,0,0,.2);
    }

    .actions{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .actions button{
      border:0; padding:12px 16px; border-radius:14px; cursor:pointer;
      font-weight:600; font-size:16px;
      box-shadow: 0 10px 25px rgba(0,0,0,.12);
      transition: transform .08s ease;
    }
    .actions button:active{transform: translateY(1px) scale(.99);}
    .primary{background:#ff3b6b; color:#fff;}
    .ghost{background:rgba(255,255,255,.85); color:#111;}
    .hint{ margin:10px 0 0; font-size:14px; opacity:.85; min-height: 18px; }
    /* ====== KONIEC: WERYFIKACJA ====== */

    .card{
      width:min(560px, 92vw);
      background: rgba(255,255,255,.75);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.55);
      border-radius:24px;
      padding:28px 26px;
      box-shadow: 0 18px 60px rgba(0,0,0,.18);
      text-align:center;
      position:relative;
    }
    h1{margin:0 0 8px; font-size:clamp(26px, 5vw, 38px);}
    p{margin:10px 0; font-size:clamp(16px, 2.6vw, 18px); line-height:1.5;}
    .btns{display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:18px;}
    button{
      border:0; padding:12px 16px; border-radius:14px; cursor:pointer;
      font-weight:600; font-size:16px;
      box-shadow: 0 10px 25px rgba(0,0,0,.12);
      transition: transform .08s ease;
    }
    button:active{transform: translateY(1px) scale(.99);}
    .yes{background:#ff3b6b; color:#fff;}
    .no{background:#ffffff; color:#111;}
    .small{font-size:13px; opacity:.8; margin-top:14px}

    /* serduszka */
    .heart{
      position:absolute; left:var(--x); top:110%;
      font-size: var(--s);
      animation: floatUp var(--d) linear infinite;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
      opacity:.95;
      user-select:none;
      pointer-events:none;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) rotate(0deg); opacity:0;}
      10%{opacity:1;}
      to{ transform: translateY(-140vh) rotate(360deg); opacity:0;}
    }
    .reveal{
      margin-top:16px;
      padding:14px 16px;
      border-radius:18px;
      background: rgba(255,255,255,.85);
      border: 1px dashed rgba(255,59,107,.55);
      display:none;
    }
  </style>
</head>

<body>

  <!-- ====== NOWE: "Czy jeste≈õ robotem" (siatka zdjƒôƒá) ====== -->
  <div class="gate" id="gate">
    <h1>Ma≈Ça weryfikacja üòÑ</h1>
    <p>Wybierz zdjƒôcia, na kt√≥rych jest <b>Twoja Walentynka</b> üíò</p>

    <div class="grid" id="grid"></div>

    <div class="actions">
      <button class="primary" id="checkBtn">Sprawd≈∫</button>
      <button class="ghost" id="resetBtn">Wyczy≈õƒá</button>
    </div>

    <p class="hint" id="hint"></p>
  </div>
  <!-- ====== KONIEC: weryfikacja ====== -->

  <!-- ====== Twoja karta (ukryta do czasu przej≈õcia weryfikacji) ====== -->
  <div class="card hidden" id="card">
    <h1>Misiu Pysiu <span id="name">, M√≥j Kr√≥lisiu</span> üíò</h1>
    <p> Mam jedno pytanie‚Ä¶</p>
    <p style="font-size:20px; font-weight:700;">Zostaniesz mojƒÖ WalentynkƒÖ? (wybierz dobrze)</p>

    <div class="btns">
      <button class="yes" id="yesBtn">TAK ‚ù§Ô∏è</button>
      <button class="no" id="noBtn">Nie üôà</button>
    </div>

    <div class="reveal" id="reveal">
      <p style="margin:0; font-weight:700;">Dobry wyb√≥r!</p>
      <p style="margin:8px 0 0;">Dobry wyb√≥r... <b>w nagrodƒô bƒôdzie buziaczek</b>. üòâ</p>
    </div>

    <div class="small">Tip: mo≈ºesz dodaƒá imiƒô w linku: <code>?imie=Ania</code></div>
  </div>

  <script>
    // ====== NOWE: ustawienie zdjƒôƒá do weryfikacji ======
    // Masz w repo: img/1.png ... img/7.png
    // USTAW correct:true przy tych numerach, gdzie jest "Twoja walentynka"
    const images = [
      { src: "img/1.png", correct: true },
      { src: "img/2.png", correct: true },
      { src: "img/3.png", correct: true },
      { src: "img/4.png", correct: true },
      { src: "img/5.png", correct: true },
      { src: "img/6.png", correct: true },
      { src: "img/7.png", correct: true },
    ];

    const grid = document.getElementById("grid");
    const hint = document.getElementById("hint");

    // render kafelk√≥w
    images.forEach((it, idx) => {
      const tile = document.createElement("div");
      tile.className = "tile";
      tile.dataset.idx = idx;

      const img = document.createElement("img");
      img.src = it.src;
      img.alt = "Obraz " + (idx + 1);
      img.loading = "lazy";

      tile.appendChild(img);
      tile.addEventListener("click", () => tile.classList.toggle("selected"));
      grid.appendChild(tile);
    });

    function getSelectedIdx() {
      return [...document.querySelectorAll(".tile.selected")]
        .map(t => Number(t.dataset.idx))
        .sort((a,b)=>a-b);
    }

    function getCorrectIdx() {
      return images
        .map((it, i) => it.correct ? i : null)
        .filter(v => v !== null)
        .sort((a,b)=>a-b);
    }

    document.getElementById("resetBtn").addEventListener("click", () => {
      document.querySelectorAll(".tile.selected").forEach(t => t.classList.remove("selected"));
      hint.textContent = "";
    });

    document.getElementById("checkBtn").addEventListener("click", () => {
      const sel = getSelectedIdx();
      const cor = getCorrectIdx();

      const ok = sel.length === cor.length && sel.every((v,i)=>v===cor[i]);

      if (ok) {
        hint.textContent = "Super! üíò";
        document.getElementById("gate").classList.add("hidden");
        document.getElementById("card").classList.remove("hidden");
      } else {
        hint.textContent = "Nie tym razem üòÑ Spr√≥buj jeszcze!";
      }
    });
    // ====== KONIEC: weryfikacja ======


    // imiƒô z parametru w URL: ?imie=Ania
    const params = new URLSearchParams(location.search);
    const imie = params.get("imie");
    if (imie) document.getElementById("name").textContent = imie;

    // serduszka w tle (dzia≈ÇajƒÖ niezale≈ºnie)
    const hearts = ["üíñ","üíò","üíï","‚ù§Ô∏è","üíó"];
    for (let i=0;i<18;i++){
      const s = document.createElement("div");
      s.className = "heart";
      s.textContent = hearts[Math.floor(Math.random()*hearts.length)];
      s.style.setProperty("--x", (Math.random()*100) + "vw");
      s.style.setProperty("--s", (18+Math.random()*22) + "px");
      s.style.setProperty("--d", (6+Math.random()*8) + "s");
      s.style.animationDelay = (-Math.random()*10) + "s";
      document.body.appendChild(s);
    }

    document.getElementById("yesBtn").onclick = () => {
      document.getElementById("reveal").style.display = "block";
      confetti();
    };

    // "Nie" ucieka :)
    const noBtn = document.getElementById("noBtn");
    noBtn.onmouseover = () => {
      const card = document.getElementById("card").getBoundingClientRect();
      const x = Math.random()*(card.width-90);
      const y = Math.random()*(card.height-50);
      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    };

    // ma≈Çe confetti bez bibliotek
    function confetti(){
      for(let i=0;i<120;i++){
        const p=document.createElement("div");
        p.style.position="fixed";
        p.style.left=(innerWidth/2)+"px";
        p.style.top=(innerHeight/2)+"px";
        p.style.width="8px"; p.style.height="8px";
        p.style.borderRadius="2px";
        p.style.background=`hsl(${Math.random()*360}, 90%, 60%)`;
        p.style.zIndex=9999;
        const ang=Math.random()*Math.PI*2;
        const vel=4+Math.random()*8;
        let x=0,y=0,vy=0;
        document.body.appendChild(p);
        const t=setInterval(()=>{
          x+=Math.cos(ang)*vel;
          y+=Math.sin(ang)*vel;
          vy+=0.25; y+=vy; // grawitacja
          p.style.transform=`translate(${x}px, ${y}px) rotate(${i*3}deg)`;
        },16);
        setTimeout(()=>{clearInterval(t); p.remove();}, 1200+Math.random()*600);
      }
    }
  </script>
</body>
</html>
